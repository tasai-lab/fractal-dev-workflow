# Scoring Rubric

## スコアリング概要

| カテゴリ | 満点 | ステータス閾値 |
|---------|------|--------------|
| Structure | 20 | PASS: 16-20, WARN: 10-15, FAIL: 0-9 |
| Compliance | 20 | PASS: 16-20, WARN: 10-15, FAIL: 0-9 |
| Flow | 20 | PASS: 16-20, WARN: 10-15, FAIL: 0-9 |
| Token | 20 | PASS: 16-20, WARN: 10-15, FAIL: 0-9 |
| Security | 20 | PASS: 16-20, WARN: 10-15, FAIL: 0-9 |
| **Total** | **100** | PASS: 80-100, WARN: 50-79, FAIL: 0-49 |

## Category 1: Structure (構造) - 20点

### 1.1 plugin.json (4点)
| 条件 | 点数 |
|------|------|
| .claude-plugin/plugin.json が存在し、name必須フィールドあり | 4 |
| plugin.json存在するが必須フィールド不足 | 2 |
| plugin.json が存在しない | 0 |

### 1.2 スキル定義 (4点)
| 条件 | 点数 |
|------|------|
| skills/ 内の全ディレクトリにSKILL.md存在 | 4 |
| 90%以上のディレクトリにSKILL.md存在 | 3 |
| 70%以上 | 2 |
| 50%以上 | 1 |
| 50%未満 | 0 |

### 1.3 エージェント定義 (4点)
| 条件 | 点数 |
|------|------|
| 全エージェントにフロントマター + description | 4 |
| 90%以上 | 3 |
| 70%以上 | 2 |
| 50%以上 | 1 |
| 50%未満 | 0 |

### 1.4 フック定義 (4点)
| 条件 | 点数 |
|------|------|
| hooks.json参照の全スクリプトが存在 + bash -n通過 | 4 |
| 全スクリプト存在するが構文エラーあり | 2 |
| 一部スクリプト欠損 | 1 |
| hooks.jsonが無効 or 大半欠損 | 0 |

### 1.5 命名規則 (4点)
| 条件 | 点数 |
|------|------|
| 全ディレクトリ/ファイルがケバブケース | 4 |
| 90%以上準拠 | 3 |
| 70%以上 | 2 |
| 50%以上 | 1 |
| 50%未満 | 0 |

## Category 2: Compliance (仕様準拠) - 20点

### 2.1 SKILL.md準拠 (5点)
| 条件 | 点数 |
|------|------|
| 全SKILL.mdにYAMLフロントマター + name + description | 5 |
| 90%以上準拠 | 4 |
| 70%以上 | 3 |
| 50%以上 | 2 |
| 50%未満 | 0 |

### 2.2 エージェント準拠 (5点)
| 条件 | 点数 |
|------|------|
| 全エージェントにYAMLフロントマター + description必須 | 5 |
| 90%以上 | 4 |
| 70%以上 | 3 |
| 50%未満 | 0 |

### 2.3 hooks.json準拠 (5点)
| 条件 | 点数 |
|------|------|
| hooks キー存在 + 全イベント名有効 + type:"command" | 5 |
| 軽微な非準拠（timeout未設定等） | 3 |
| 重大な非準拠 | 0 |

### 2.4 コマンド準拠 (5点)
| 条件 | 点数 |
|------|------|
| 全コマンドにYAMLフロントマター + description | 5 |
| 90%以上 | 4 |
| 70%以上 | 3 |
| 50%未満 | 0 |

## Category 3: Flow (フロー効率) - 20点

### 3.1 スキル間参照 (5点)
| 条件 | 点数 |
|------|------|
| Related Skills/Integration記載の全参照先が実在 | 5 |
| 90%以上解決 | 3 |
| 未解決参照多数 | 0 |

### 3.2 エージェント⇔スキル対応 (5点)
| 条件 | 点数 |
|------|------|
| 各エージェントに対応するスキルが存在し整合的 | 5 |
| 軽微な不整合 | 3 |
| 重大な不整合 | 0 |

### 3.3 フック⇔スクリプト整合性 (5点)
| 条件 | 点数 |
|------|------|
| hooks.json登録の全フックに対応スクリプト存在 + 動作確認済み | 5 |
| スクリプト存在するが一部不整合 | 3 |
| 欠損あり | 0 |

### 3.4 冗長性・未使用検出 (5点)
| 条件 | 点数 |
|------|------|
| 未使用スキル/エージェント/スクリプトがゼロ | 5 |
| 1-2個の未使用 | 3 |
| 3個以上の未使用 | 1 |

## Category 4: Token (トークン効率) - 20点

### 4.1 SKILL.mdサイズ (5点)
| 条件 | 点数 |
|------|------|
| 全SKILL.mdが500行以下 | 5 |
| 平均500行以下（一部超過あり） | 3 |
| 平均800行以下 | 1 |
| 平均800行超 | 0 |

### 4.2 references分離度 (5点)
| 条件 | 点数 |
|------|------|
| 300行超のスキルに全てreferences/分離あり | 5 |
| 50%以上のスキルで分離あり | 3 |
| references/ディレクトリ自体がない | 0 |

### 4.3 サブエージェント活用度 (5点)
| 条件 | 点数 |
|------|------|
| 実装系スキルにTask()パターンあり + model指定あり | 5 |
| Task()パターンあるがmodel指定なし | 3 |
| サブエージェント活用なし | 0 |

### 4.4 重複コンテンツ (5点)
| 条件 | 点数 |
|------|------|
| スキル間で重複する大きなテキストブロック（50行以上）なし | 5 |
| 1-2箇所の重複 | 3 |
| 3箇所以上の重複 | 0 |

## Category 5: Security (セキュリティ) - 20点

### 5.1 変数クォート (5点)
| 条件 | 点数 |
|------|------|
| 全フックスクリプトで変数が適切にクォート | 5 |
| 90%以上 | 3 |
| 重大なクォート漏れ | 0 |

### 5.2 CLAUDE_PLUGIN_ROOT使用 (5点)
| 条件 | 点数 |
|------|------|
| フック内のパス参照のみに使用（ソースパス解決に不使用） | 5 |
| ソースパス解決に使用している箇所あり | 0 |

### 5.3 自己参照防止 (5点)
| 条件 | 点数 |
|------|------|
| reinstallスクリプトに自己参照防止ガードあり | 5 |
| ガードなし | 0 |

### 5.4 機密情報露出 (5点)
| 条件 | 点数 |
|------|------|
| .env/credentials/secret参照なし | 5 |
| 参照はあるが安全に処理 | 3 |
| 平文での参照あり | 0 |

## Overall Score 算出

```
Overall = Structure + Compliance + Flow + Token + Security
```

### Severity マッピング
- Finding に Critical ルール違反 → Severity: High
- Finding に High ルール違反 → Severity: Medium
- Finding に Medium/Low ルール違反 → Severity: Low
